## project_crypto__fen_2023
Репозиторий для проекта по анализу данных на ФЭН 2023. 

# Тема проекта: **"Классификация криптовалют на основе их рыночных показателей"**

## Состав группы: Виктория Карпейкина, Юлия Щучкина, Максим Бочаров

# Данные : 

В рамках нашего проекта мы проанализировали котировки топ-68 криптовалют за период с 01.01.2020 по 10.05.2023, полученные с криптовалютной
биржи Binance. Они представлены в таблице <a href="https://github.com/NikaFortem/project_crypto__fen_2023/blob/main/df_price.csv" target="_blank">df_price.csv</a> .

Однако помимо стоимостных показателей, мы посмотрели на тип рассматриваемых криптовалют (категориальный признак). По самой базовой классификации криптовалюты делятся на **монеты (coin)** и **токены (token)**.

**Монеты** – это независимые криптоактивы, которые способны работать автономно от других платформ, так как они обладают собственным блокчейном, используются для совершения сделок купли продажи различных товаров, для инвестирования.

**Токены** - не обладают собственным блокчейном, им необходим посредник для совершения сделок, зачастую используются как расчетное средство внутри криптовалютных стартапов, и в проектах связанных с NFT (play-to-earn), где частой практикой является привязка токенов к каким-то более крупным монетам, таким как Ethereum. 

Мы взяли данные о типе криптовалют с сайта https://coinmarketcap.com . Они представлены в текстовом файле <a href="https://github.com/NikaFortem/project_crypto__fen_2023/blob/main/type.txt" target="_blank">type.txt</a> .

# Первичный анализ данных:

На основе первичного анализа данных были сделаны выводы о динамике криптовалют за рассматриваемый период. В течение последних 3 динамика рынка криптовалют была довольно неодназначной. Однако можно сказать, что с начала 2020 года к маю 2023 года цены криптовалют выросли (хорошо видно на примере 3 из 5 рассмотренных криптовалют: BTC, ETH, BNB). 

Сперва можно наблюдать довольно успешное восстановление крипторынка после пандемии covid-19 в 2020 году. Затем можно наблюдать значительный спад в конце весны 2021 года, связанный с тем, что: биткоин обвалился более чем на 30% до 30 тысяч, т.к. Илон Маск отказался принимать платежи в виде биткоина в Tesla - отчасти из-за запретов на цифровые активы в Китае и того, что их майнинг вредит окружающей среде, а эфир стал стоить менее $2000, упав на 44%, из-за этого, прикрываясь разными причинами, криптобиржи временно приостанавливали покупку и вывод средств. Далее значимый кризис наблюдался в начале 2022 года, по причине напряженной политической обстановки в Казахстане и началом СВО. Следующий кризис, наблюдаемиый весной 2022, стали называть системным из-за падения доверия инвесторов к крипторынку на фоне скандала вокруг биржи FTX — четвертой среди крупнейших бирж по торговле криптовалютами, связанного с недостаточным риск-менеджментом, что в период борьбы с инфляцией в Америке и повышением ключевой ставки сильно сказалось на котировках криптовалют.

Все эти кризисы отразились на графиках динамики цен рассмотренных криптовалют как резкие скачки в сторону понижения их цен.  

# Рыночные показатели криптовалют:

Для дальнейшего анализа и машинного обучения мы использовали следующие рыночные показатели:

### **Доходность**  

Процентное изменение стоимости за некоторый промежуток времени. Мы будем работать с доходностями за день: 

$$
R_t = \frac{P_t - P_{t-1}}{P_{t-1}}
$$

### **Волатильность** 

Cтандартное отклонение доходности актива. 

### **Value-at-Risk на уровне 5%**

Квантиль доходности уровня 5%, т.е. такое значение доходности, что в 95% случаев дела будут идти лучше.

### **Коэффициент Шарпа**

$$
Sharp Ratio = \frac{R_p - R_f}{σ_p}
$$

- $R_p$ - доходность анализируемого актива

- $R_f$ - доходность безрискового актива

- $σ_p$ - стандартное отклонение доходности анализируемого актива

   Вычисляя коэффициент Шарпа, мы сравниваем поведение актива с альтернативной безрисковой величиной. Поскольку все криптовалюты торгуются в долларах США,    оптимально было взять за подобную безрисковую величину доходность по государственным облигациям США - US TREASURY.

   Доходность US TREASURY за период 01.01.2020 - 10.05.2023 взята с сайта американской биржи NASDAQ 
   (https://data.nasdaq.com/data/USTREASURY/YIELD-treasury-yield-curve-rates). Они представлены в таблице <a href="https://github.com/NikaFortem/project_crypto__fen_2023/blob/main/USTREASURY-YIELD.csv" target="_blank">USTREASURY-YIELD.csv</a> .

   Однако в отличии от криптовалютной биржи Binance, с которой взяты данные о котировках криптовалют, биржа NASDAQ, где торгуются ценные бумаги, собирает      статистику только в будние дни, так как по входным торги не идут. Поэтому далее в отношении доходностей и прочих показателей были рассмотрены только        рабочие дни.

   Поскольку ранее мы рассматривали ежедневную доходность криптовалют, для подсчета коэффициента Шарпа были рассмотрены ежедневные колебания доходности,      связанные с колебаниями стоимости treasury (купонную доходность здесь не учитывали), самых краткосрочных US TREASURY, то есть со сроком обращения 1        месяц.
  
### Прочие показатели

   Также для боллее наглядного представления динамики рынка криптовалют были рассмотрены такие показатели, как:
   - логарифмированные цены
   - накопленная доходность
   - Average True Range (средний истинный диапозон)

# Проверка гипотез:

Для того, чтобы проанализировать влияние типа криптовалюты на ее рыночное поведение, мы проверили серию гипотез о равенстве математических ожиданий и дисперсий между типами криптовалют по рассчитанным для них показателям: доходности, волатильности и VaR. Для их проверки мы использовали 2 основные выборки: криптовалюты типа "coin" и типа "token". В ходе работы мы проверили следующие гипотезы:

   - Гипотеза о равенстве матожиданий по доходности для двух групп криптовалют

   - Гипотеза о равенстве матожиданий по волатильности для двух групп криптовалют

   - Гипотеза о равенстве матожиданий по VaR для двух групп криптовалют

   - Гипотеза о равенстве дисперсий по доходности для двух групп криптовалют

   - Гипотеза о равенстве дисперсий по волатильности для двух групп криптовалют

   - Гипотеза о равенстве дисперсий по VaR для двух групп криптовалют

Все рассмотренные гипотезы на 5% уровне значимости не отвергаются. Это говорит о том, что тип криптовалют не оказывает значительного влияния на их рыночное поведение, поскольку математические ожидания и дисперсии их рыночных показателей не отличаются (в 95% случаев).

# Машинное обучение - Кластеризация

В рамках нашего проекта и блока "Машинное обучение" рассматриваем задачу кластеризации. Мы разбиваем криптовалюты на несколько сегментов, анализируя их рыночные показатели. Обучающей выборки в данной задаче нет. В результате машинного обучения мы получим новый критерий разделения криптовалют на группы - рыночные показатели и проанализируем получившиеся кластеры.

В качестве рыночных показателей мы используем:

- доходность

- волатильность

- Value at Risk

- коэффициент Шарпа

Наиболее распространенные методы кластеризации - K-means и DBSCAN, их мы и будем использовать.

### Кластеризация методом K-means

Кластеризация методом K-means происходит по следующему сценарию:

- Инициализируем центры кластеров случайно (задано количество кластеров).
- Относим точки к соответствующим кластерам (с минимальным расстоянием до их центра).
- Производится пересчет центров кластеров по формуле центра масс всех точек принадлежащих кластеру.
- Пункты 2-3 повторяются до тех пор пока центры кластеров перестанут меняться (сильно).

Для поиска оптимального количества кластеров в модели K-means используется метод локтя: мы обучили модель для разного количества кластеров и для каждого из них подсчитали такой критерий – сумма квадратов расстояний от точек до центроидов кластеров, к которым они относятся - по следующей формуле:

$$ 
J(C) = \sum_{k=1}^K\sum_{i~\in~C_k} ||x_i - \mu_k|| \rightarrow \min\limits_C,
$$

здесь $C$ – множество кластеров мощности $K$, $\mu_k$ – центроид кластера $C_k$.

Это довольно логично, поскольку мы хотим, чтобы точки распологались кучно возле центров своих кластеров. Но минимум такого функционала будет достигаться тогда, когда кластеров столько же, сколько и точек (то есть каждая точка – это кластер из одного элемента), что довольно неэффективно. Поэтому для выбора числа кластеров мы будем воспользовались такой эвристикой: оптимально то число кластеров, начиная с которого описанный функционал $ J(C) $ падает "уже не так быстро". Формально говоря: 


$$
Q(k) = \frac{|J(C_k) - J(C_{k+1})|}{|J(C_{k-1}) - J(C_{k})| } \to \min_{k}
$$

При помощи метода локтя, мы определили, что для метода K-means оптимальное количество кластеров равно 2, так как перегиб происходит в точке k=2, .

И обучили модель кластеризации методом K-means для 2 кластеров. В результате, получилось, что среди 68 криптовалют только одна попала в другой кластер. То есть данная кластеризация получилась недостаточно информативной. Это может быть связано с тем, что метод K-means предпочтителен при работе с кластерами с простой геометрией, более сложные формы он может интерпретировать некорректно. Поэтому мы рассмотрели другой алгоритм, который формирует кластеры в рамках заданнной окрестности, то есть метод **DBSCAN**.












